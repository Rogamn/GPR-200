#version 300 es

#ifdef GL_ES
precision highp float;
#endif

// Uniforms
uniform sampler2D uTexture;
uniform vec2 uResolution;

// Varyings
in vec2 vTexCoord;

out vec4 rtColor;

void main()
{
	vec4 original;

	// Sample from texture
	original = texture(uTexture, vTexCoord);
	
	// RGB to Luma calculation from wikipedia
	float luminance = (original.r * 0.2126) + (original.g * 0.7152) + (original.b * 0.0722);
    
	// luminance^4 to increase dark values
	luminance *= luminance;
	luminance *= luminance;
    
	// Apply tone mapping
	rtColor = original * luminance;
}